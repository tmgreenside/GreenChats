<% extend('base') %>

<h3><%= user.firstname %> <%= user.lastname %>'s Profile</h3>

<div id="homeButtons">
    <button id="showAbout">About</button>
    <button id="showPosts">Posts</button>
</div>

<div id="About" name="About" hidden>
    <table>
        <tr>
            <td>Gender</td>
            <td><%= user.gender %></td>
        </tr>
        <tr>
            <td>Birthdate</td>
            <td><%= user.birthdate %></td>
        </tr>
    </table>
</div>

<div id="Posts" name="Posts">
    <form name="blogForm" id="blogForm" method="POST" enctype="multipart/form-data">
        <textarea name="blog"></textarea><br>
        <input type="file" accept="audio/*, video/*, image/*" name="uploadFiles" id="uploadFiles" multiple><br>
        <input type="submit" value="Share"></input>
    </form>
    <% var imageCount = 0; %>
    <% for (var i= 0; i < resultPosts.length; i++) { %>
        <div class="blogPost">
            <h5><%= resultPosts[i]['firstname'] %> <%= resultPosts[i]['lastname'] %></h5>
            <article><%- resultPosts[i]['postText'].replace(/\n/g, "<br>") %></article>
            <% for (var j = 0; j < resultMedia.length; j++) { %>
                <% if (resultMedia[j]['postID'] === resultPosts[i]['id']) { %>
                    <% if (resultMedia[j]['type'] === "image/jpeg") { %>
                        <img src="<%= resultMedia[j]['filePath']%>" />
                    <% } else { %>
                        <p>File type not supported at this time.</p>
                    <% } %>
                <% } %>
            <% } %>
        </div>
    <% } %>
</div>

<div id="Friends" name="Friends">
</div>

<script>
    $("#showAbout").on("click", function() {
        $("#Posts").hide();
        $("#About").show();
    });

    $("#showPosts").on("click", function() {
        $("#Posts").show();
        $("#About").hide();
    });
</script>
